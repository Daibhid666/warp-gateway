# Warp Gateway 操作手册（Windows / macOS）

本手册面向日常使用（非开发/编译）。包含：安装、激活、证书、启动代理、卸载、常见问题排查与日志路径。

说明：本手册不包含内部实现细节、接口细节或风控/策略细节。

---

## 免责声明

1. 本软件仅供合法合规用途使用。使用者应自行确保其操作符合所在地法律法规及相关服务条款。
2. 账号、网络环境、第三方服务策略等因素可能导致功能表现差异或不可用，软件不对由此造成的损失承担责任。
3. 本软件可能涉及对系统网络设置与证书的操作。请仅在你信任的设备上使用，并妥善保管账号信息与激活码。
4. 本手册仅提供一般性操作说明，不构成任何法律、合规或安全建议。

---

## 1. 快速上手（推荐顺序）

1. 安装并启动 Warp Gateway
2. 激活软件（未激活无法启动代理）
3. 安装 CA 证书（未安装证书会导致 HTTPS 失败）
4. 导入/添加账号
5. 单个刷新验证 1-2 个账号可用
6. 启动代理
7. 启动 Warp（或重启 Warp），开始使用

---

## 2. 安装与启动

### Windows

1. 运行安装包（`.msi` 或 `.exe`）
2. 启动应用后，在“网关”页完成激活与证书安装

### macOS

1. 安装应用（`.dmg` 拖入 Applications）
2. 启动应用后，在“网关”页完成激活与证书安装

---

## 3. 激活与到期行为

### 3.1 如何激活

1. 打开应用“网关”页（或“设置/激活”区域）
2. 输入激活码
3. 点击激活
4. 成功后会显示剩余天数/到期时间

### 3.2 激活码过期会发生什么

1. 过期后通常无法启动代理
2. 如果代理已在运行，后台校验任务检测到过期/移除时会自动停止代理
3. 解决方式：更换/续费激活码后重新激活

---

## 4. CA 证书（HTTPS 必需）

### 4.1 安装证书

1. 打开应用“证书”区域
2. 点击“安装 CA 证书”
3. Windows 可能弹 UAC 提示，允许即可

### 4.2 卸载证书

1. 打开应用“证书”区域
2. 点击“卸载 CA 证书”

### 4.3 常见问题

1. 安装后仍无法抓取 HTTPS：重启 Warp、重启应用、确认根证书确实安装到系统信任区
2. 被安全软件/公司策略拦截：需要放行或使用管理员权限安装

---

## 5. 代理启动/停止

### 5.1 启动代理

1. 打开应用“网关”页
2. 点击“启动”
3. 成功后会显示监听地址与端口（例如 `127.0.0.1:9528`）

### 5.2 停止代理

1. 点击“停止”
2. 停止后 Warp 的请求不再经过网关

### 5.3 端口被占用

1. 修改端口后再启动
2. 或关闭占用端口的程序

---

## 6. 账号管理与刷新

### 6.1 单个刷新

用途：更新额度与账号状态（例如：正常/上限/失效/封禁）。

1. 在“账号”页选中账号
2. 点击单个刷新

### 6.2 批量刷新

用途：批量更新额度与账号状态。

1. 勾选多个账号
2. 点击“刷新勾选”

### 6.3 定时刷新

1. 如果启用了定时刷新，它会按间隔自动刷新（并执行探测）
2. 定时刷新不会替你重放 Warp 的失败请求，但能更早把不可用账号标记并切走

---

## 7. 自动换号说明（为什么有时需要重试）

现有策略是：

1. 当请求异常时，网关会尝试自动切换到下一个可用账号
2. 已经失败的那一次请求不会被网关自动重新发送
3. 因此你可能需要在客户端重试一次，下一次请求才会使用新账号
4. 有时看起来“自动成功”，通常是客户端自身对某些请求做了自动重试，或同一操作触发了多条请求

---

## 8. Windows 常见错误：登录状态异常

现象示例：

1. 弹窗提示无法完成登录/授权相关操作
2. Warp 启动后提示需要重新登录

建议排查：

1. 完整退出 Warp 后重试
2. 确认证书安装正常、网络环境正常
3. 仍无法解决：导出/提供网关日志，联系维护人员定位

---

## 9. 卸载（Windows：不手动删除本地数据）

目标：只卸载程序，不手动删除账号/配置/日志等数据文件。

1. 控制面板 -> 程序和功能 -> 选择 Warp Gateway -> 卸载
2. 或 设置 -> 应用 -> 已安装的应用 -> 卸载

注意：

1. 不要通过“手动删除安装目录”来卸载
2. 卸载程序不会自动卸载系统证书。若你不再使用本软件，建议在应用里先“卸载 CA 证书”

---

## 11. 常见问题速查

### 11.1 启动失败：未激活/已过期

1. 重新激活
2. 确认网络环境正常

### 11.2 HTTPS 失败

1. 安装 CA 证书
2. 重新启动 Warp

### 11.3 端口占用

1. 更换端口
2. 停掉占用端口的进程

---
